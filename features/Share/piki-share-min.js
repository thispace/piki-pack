!function($){window.startPikiShare=function(){$("body").on("click",".pikishare a",function(i){i.preventDefault(),$(this).PikiShare()})},$(function(){window.startPikiShare()}),$.fn.PikiShare=function(){return this.each(function(){var i=$(this),t=this;this.url=this.getAttribute("href"),this.type=this.getAttribute("class").split(" ").shift(),this.title=this.getAttribute("title"),this.texto=i.attr("content"),this.content_url=i.parents(".pikishare").first().attr("share-url"),this.loading=!1,this.openEmail=function(e){if(this.loading!==!0){if(this.loading=!0,$.fn.pikiLoader(),void 0===this.modal){var s=$.ajax({url:this.url,type:"GET",beforeSend:function(){$.fn.pikiLoader("close")}});s.done(function(e){$.fn.pikiLoader("close"),t.modal=$(e).appendTo("body"),t.form=t.modal.find("form").first().PikiForm(),$("input.url",t.form).hide().after('<span class="fake-field"></span>'),$("input.assunto",t.form).hide().after('<span class="fake-field"></span>'),t.modal.dialog({modal:!0,width:640,show:{effect:"fade",duration:300},hide:{effect:"fade",duration:200},close:function(){t.loading=!1}}),i.PikiShare("insertValues")}),s.fail(function(i,t){console.log("Request failed: "+t)})}else this.insertValues(e),this.modal.dialog("open");$.fn.pikiLoader("close")}},this.insertValues=function(i){$("input.url",this.form).val(this.content_url).siblings(".fake-field").first().html(this.content_url),$("input.assunto",this.form).val(i.subject).siblings(".fake-field").first().html(i.subject),$("textarea.mensagem",this.form).val(i.content)},"pikiform-ajax-button"===this.type?this.openEmail({subject:i.parent().attr("subject"),content:i.parent().attr("content")}):window.open(this.url,this.title,"width=500,height=500")})},window.pikiforms_pikishare_submit=function(i,t){i.slideUp(800,function(){var i=$(this),e=i.closest("#status-message");if(!e.length){var s="";s+='<div id="status-message" class="clearfix success">',s+="	"+t.message,s+="</div>",e=$(s).hide().insertAfter(i).hide();var n=e.find(".reload-form");n.length&&n.data("PikiForm",{wrapper:e,target:i}).click(function(){var i=$(this).data("PikiForm");i.wrapper.stop(!0,!0).slideUp(800,function(){$("form#pikishare").find("input.email_destino").focus(),i.target.stop(!0,!0).slideDown(800)})})}$("input.email_destino",i).val(""),e.stop(!0,!0).hide().delay(100).slideDown(800)})}}(jQuery);